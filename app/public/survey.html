
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Friend Finder Survey Page</title>

	<link href="https://fonts.googleapis.com/css?family=Montserrat:700" rel="stylesheet">
    <script src="https://code.jquery.com/jquery.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <style>
        h1   {font-family: 'Montserrat', sans-serif;};
    </style>
</head>
<body>
	<div class="container">
		<div class="jumbotron progress-bar-striped">
			<h1 class="text-center"><span class="glyphicon glyphicon-hand-right"></span> FRIEND FINDER <span class="glyphicon glyphicon-hand-left"></span></h1>
        </div>
        <div class='col-lg-12'>
            <div class='panel panel-default'>
                <div class="panel-heading">
                    <h3>ABOUT YOU</h3>
                </div>
                <div  class="panel-body input-group">
                    <h4>Your Name</h4>
                    <div class="input-group input-group-med">
                        <input id= "friendName" type="text" style= "width: 300px" class="form-control" aria-describedby="sizing-addon2">
                    </div>
                    <h4>Link to your Photo</h4>
                    <div  class="input-group input-group-med">
                            <input id= "friendPhoto" type="text" style= "width: 300px" class="form-control" aria-describedby="sizing-addon2">
                    </div>
                </div>
            </div>
        </div>
        <div class="panel col-lg-12">
            <h2>SURVEY QUESTIONS</h2>
            <div class="panel">
                <div class="panel-heading panel-default">
                    <h3>QUESTION 1</h3>
                </div>
                <div class="panel-body">
                    <h4>I love pets.</h4>
                    <div class="form-group">
                        <select id="formAnswer1" placeholder= "Select an Option" class=" answerForm form-control">
                          <option>1 (Strongly Disagree)</option>
                          <option>2</option>
                          <option>3</option>
                          <option>4</option>
                          <option>5 (Strongly Agree)</option>
                        </select>
                    </div>    
                </div>
            </div>
        </div>
        <div class="col-lg-12">
            <div class="panel">
                <div class="panel-heading panel-default">
                    <h3>I am a morning person.</h3>
                </div>
                <div class="panel-body">
                    <h4>blah blah blah question?</h4>
                    <div class="form-group">
                        <select id="formAnswer2" placeholder= "Select an Option" class="form-control">
                          <option>1 (Strongly Disagree)</option>
                          <option>2</option>
                          <option>3</option>
                          <option>4</option>
                          <option>5 (Strongly Agree)</option>
                        </select>
                    </div>    
                </div>
            </div>
        </div>
        <div class="col-lg-12">
            <div class="panel">
                <div class="panel-heading panel-default">
                    <h3>I like to live in the city.</h3>
                </div>
                <div class="panel-body">
                    <h4>blah blah blah question?</h4>
                    <div class="form-group">
                        <select id="formAnswer3" placeholder= "Select an Option" class="form-control">
                          <option>1 (Strongly Disagree)</option>
                          <option>2</option>
                          <option>3</option>
                          <option>4</option>
                          <option>5 (Strongly Agree)</option>
                        </select>
                    </div>    
                </div>
            </div>
        </div>
        <div class="col-lg-12">
            <div class="panel">
                <div class="panel-heading panel-default">
                    <h3>I am close to my family.</h3>
                </div>
                <div class="panel-body">
                    <h4>blah blah blah question?</h4>
                    <div class="form-group">
                        <select id="formAnswer4" placeholder= "Select an Option" class="form-control">
                          <option>1 (Strongly Disagree)</option>
                          <option>2</option>
                          <option>3</option>
                          <option>4</option>
                          <option>5 (Strongly Agree)</option>
                        </select>
                    </div>    
                </div>
            </div>
        </div>
        <div class="col-lg-12">
            <div class="panel">
                <div class="panel-heading panel-default">
                    <h3>QUESTION 5</h3>
                </div>
                <div class="panel-body">
                    <h4>I am adventurous.</h4>
                    <div class="form-group">
                        <select id="formAnswer5" placeholder= "Select an Option" class="form-control">
                          <option>1 (Strongly Disagree)</option>
                          <option>2</option>
                          <option>3</option>
                          <option>4</option>
                          <option>5 (Strongly Agree)</option>
                        </select>
                    </div>    
                </div>
            </div>
        </div>
        <div class="col-lg-12">
            <div class="panel">
                <div class="panel-heading panel-default">
                    <h3>QUESTION 6</h3>
                </div>
                <div class="panel-body">
                    <h4>blah blah blah question?</h4>
                    <div class="form-group">
                        <select id="formAnswer6" placeholder= "Select an Option" class="form-control">
                          <option>1 (Strongly Disagree)</option>
                          <option>2</option>
                          <option>3</option>
                          <option>4</option>
                          <option>5 (Strongly Agree)</option>
                        </select>
                    </div>    
                </div>
            </div>
        </div>
        <div class="col-lg-12">
            <div class="panel">
                <div class="panel-heading panel-default">
                    <h3>I love to dance.</h3>
                </div>
                <div class="panel-body">
                    <h4>blah blah blah question?</h4>
                    <div class="form-group">
                        <select id="formAnswer7" placeholder= "Select an Option" class="form-control">
                          <option>1 (Strongly Disagree)</option>
                          <option>2</option>
                          <option>3</option>
                          <option>4</option>
                          <option>5 (Strongly Agree)</option>
                        </select>
                    </div>    
                </div>
            </div>
        </div>
        <div class="col-lg-12">
            <div class="panel">
                <div class="panel-heading panel-default">
                    <h3>QUESTION 8</h3>
                </div>
                <div class="panel-body">
                    <h4>I believe in love at first sight.</h4>
                    <div class="form-group">
                        <select id="formAnswer8" placeholder= "Select an Option" class="form-control">
                          <option>1 (Strongly Disagree)</option>
                          <option>2</option>
                          <option>3</option>
                          <option>4</option>
                          <option>5 (Strongly Agree)</option>
                        </select>
                    </div>    
                </div>
            </div>
        </div>
        <div class="col-lg-12">
            <div class="panel">
                <div class="panel-heading panel-default">
                    <h3>QUESTION 9</h3>
                </div>
                <div class="panel-body">
                    <h4>I own pets.</h4>
                    <div class="form-group">
                        <select id="formAnswer9" placeholder= "Select an Option" class="form-control">
                          <option>1 (Strongly Disagree)</option>
                          <option>2</option>
                          <option>3</option>
                          <option>4</option>
                          <option>5 (Strongly Agree)</option>
                        </select>
                    </div>    
                </div>
            </div>
        </div>
        <div class="col-lg-12">
            <div class="panel">
                <div class="panel-heading panel-default">
                    <h3>QUESTION 10</h3>
                </div>
                <div class="panel-body">
                    <h4>I love music.</h4>
                    <div class="form-group">
                        <select id="formAnswer10" placeholder= "Select an Option" class="form-control">
                          <option>1 (Strongly Disagree)</option>
                          <option>2</option>
                          <option>3</option>
                          <option>4</option>
                          <option>5 (Strongly Agree)</option>
                        </select>
                    </div>    
                </div>
            </div>
        </div>
        <!-- submit button -->
        <button id="submitButton" class="btn btn-lg btn-info submitButton">Submit</button>       
        
        <div id="resultsModal" class="modal fade" role="dialog">
            <div class="modal-dialog">
            <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">Ã—</button>
                        <h2 class="modal-title"><strong>Best Match</strong></h2>
                    </div>
                    <div class="modal-body">
                        <h2 id="matchName"></h2>
                    </div>
                </div>   
            </div>    
        </div>
        <script>
            //jquery for click function
            $("#submitButton").on("click", function(){
                event.preventDefault();
            // object for user's data
                var userData = {
                    name: $("#friendName").val().trim(),
                    photo: $("#friendPhoto").val().trim(),
                    scores: [$("#formAnswer1").val(),
                        $("#formAnswer2").val(),
                        $("#formAnswer3").val(),
                        $("#formAnswer4").val(),
                        $("#formAnswer5").val(),
                        $("#formAnswer6").val(),
                        $("#formAnswer7").val(),
                        $("#formAnswer8").val(),
                        $("#formAnswer9").val(),
                        $("#formAnswer10").val(), ]
                };
                    // AJAX post the data to the friends API. 
                $.post("/api/friends", userData, function(data){
                    //logic to choose best match
                    var allFriends = [];
                    for (var i=0; i<data.length; i++){
                        allFriends.push(data[i].scores);
                    }
                    console.log(allFriends);
                    var score = 0;
                    var score = [];
                    var scoreArray = [];
                    function difference (a,b) {return Math.abs(a-b);}
                    for (	var i=0; i < allFriends.length-1; i++) {
                        for (var j = 0; j < 10; j++) {
                            score+=difference(allFriends[i][j], allFriends[allFriends.length-1][j]);
                        }
                        scoreArray.push(score);
                        score = 0;
                    }
                    var indexArray = scoreArray.indexOf(Math.min(scoreArray));
                    //console.log(scoreArray);
                    console.log(indexArray);
                    // Grab the result from the AJAX post, displays best match
                    $("#matchName").html([indexArray].name);
                    // Show the modal with the best match
                    $("#resultsModal").modal();
                });
        });        
    </script>


</body>
</html>